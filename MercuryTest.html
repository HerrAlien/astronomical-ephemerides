<html>
    <head>
        <script type="text/javascript" src="js/aajs.js"></script>
        <script type="text/javascript" src="js/sun.js"></script>
 <script type="text/JavaScript" src="js/planetdata.js"></script>
       <script type="text/javascript" src="js/mercury.js"></script>
        <script type="text/javascript" src="testlib.js"></script>
        <style>
            p {
                line-spacing: 2px;
            }
        </style>
    </head>
    <body>
    </body>
</html>
<script type="text/javascript">
        var Location = {
            latitude : 0,
            longitude : 0,
            altitude : 0
        }; 
         
    (function () {
                    
        var tests = [
			{
				name : "eccentric anomaly",
				input : [357.02861 * Math.PI/180, 0.29039],
				expectedOutput : (360-4.18577) * Math.PI/180,
				actualOutput : 0 ,
				test : function () {
					this.actualOutput = AAJS['Elliptical']['EccentricAnomalyFromMeanAnomaly'] (this.input[0], this.input[1]);
					return testlib.doubleEq(this.expectedOutput, this.actualOutput, 2e-6);
				}
			},
			
			{
				name : "Mercury Data for 2017-05-02",
				input : AAJS.Date.DateToJD (2017, 5, 2, true),
				expectedOutput : 
				[5, // month
				2,  // day
				1+(32+33.1/60)/60, // RA
				8+(02+21/60)/60, // DEC
				11.02 / 3600, // diameter in degrees
				10 + 50 / 60.0, // transit
				0.60982, // delta in AU
				0.46380,
				17.5* Math.PI/180, // elongation
				0.121, // phase
				]
				,
				actualOutput : [],
				accurracy : [0, 0, 7e-6, 2e-4, 
				2e-7,
				6e-3,
				2e-5,
				2e-5,
				5e-4, 
				1e-4,
				],
				test : function () {
					this.actualOutput = MercuryData.getDataForJD (this.input);

					if (this.expectedOutput.length != this.actualOutput.length ||
						this.expectedOutput.length != this.accurracy.length)
						return false;
					
					var i = 0;
					for (i = 0; i < this.expectedOutput.length; i++) {
						if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
							return false;
					}
					
					return true;
				}
			}
        ];
            
        testlib.runTests (tests);
            
    })();
            
        </script>
