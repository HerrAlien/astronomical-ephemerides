<html>
    <head>
        <script type="text/javascript" src="js/aajs.js.unoptimized"></script>
        <script type="text/javascript" src="testlib.js"></script>

        <script type="text/javascript">
            var Pages = {};

        var Location = {
            latitude : 0,
            longitude : 0,
            altitude : 0
        }; 
        
        function GetAAJS() { return AAJS; }

        function PlanetPage() {}
            </script>



        <script type="text/JavaScript" src="js/planetdata.js"></script>
        <script type="text/JavaScript" src="js/risetransitset.js"></script>
        <script type="text/javascript" src="js/sun.js"></script>
       <script type="text/javascript" src="js/jupiter.js"></script>
       <script type="text/javascript" src="js/mars.js"></script>
       <script type="text/javascript" src="js/mercury.js"></script>
       <script type="text/javascript" src="js/neptune.js"></script>
       <script type="text/javascript" src="js/saturn.js"></script>
        <script type="text/javascript" src="js/moon.js"></script>
       <script type="text/javascript" src="js/uranus.js"></script>
       <script type="text/javascript" src="js/venus.js"></script>
        <style>
            p {
                line-spacing: 2px;
            }
        </style>
    </head>
    <body>
    </body>
</html>
<script type="text/javascript">
         
    (function () {
            
        var tests = [
                
        {
            name : "Geocentric Moon Data for 1992-04-12 00:00 UTC, lat. 0, long. 0, alt. 0",
            input : AAJS.Date.DateToJD (1992, 4, 12, true),
            expectedOutput :  [ 8 + (58+45.1/60)/60,  (13+((46+6/60)/60)) ],
            actualOutput : [],
            accurracy : [4e-5, 4e-5],
            test : function () {
            var data =  AAJS['Moon']['GeocentricEquatorialPosition'] (this.input);
                this.actualOutput = [data.X, data.Y];

                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },

        {
            name : "Jupiter Data for 2017-08-05",
            input : AAJS.Date.DateToJD (2017, 8, 5, true),
            expectedOutput : 
            [8, // month
            5,  // day
            13 + (6 + 32.3/60)/60, // RA
            -(5+(48+18/60)/60), // DEC
            33.92 / 3600, // diameter in degrees
			16+9/60, // transit time
			5.80406, // delta
			5.44960, // R
            64.8* Math.PI/180, // elongation
            0.99, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 2e-5, 5e-5, 
				4e-7,
				5e-3,
				2e-5,
				2e-6,
				5e-4,
				3e-3,
				],
            test : function () {
                var data = JupiterData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);


                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
        
        {
            name : "Mars Data for 2017-08-05",
            input : AAJS.Date.DateToJD (2017, 8, 5, true),
            expectedOutput : 
            [8, // month
            5,  // day
            8 + (50 + 54.4/60)/60, // RA
            18+(49 + 42/60)/60, // DEC
            3.52 / 3600, // diameter in degrees
			11+55/60, // transit time
			2.65816, // delta
			1.64604, // R
            3* Math.PI/180, // elongation
            1, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 5e-5, 2e-4, 
				1e-6,
				2e-2,
				5e-6,
				6e-8,
				1e-3,
				3e-4,
				],
            test : function () {
                var data = MarsData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);


                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
        
        {
				name : "Mercury Data for 2017-05-02",
				input : AAJS.Date.DateToJD (2017, 5, 2, true),
				expectedOutput : 
				[5, // month
				2,  // day
				1+(32+33.1/60)/60, // RA
				8+(02+21/60)/60, // DEC
				11.02 / 3600, // diameter in degrees
				10 + 50 / 60.0, // transit
				0.60982, // delta in AU
				0.46380,
				17.5* Math.PI/180, // elongation
				0.121, // phase
				]
				,
				actualOutput : [],
				accurracy : [0, 0, 7e-6, 2e-4, 
				2e-7,
				6e-3,
				2e-5,
				2e-5,
				5e-4, 
				1e-4,
				],
				test : function () {
                    
                                    var data = MercuryData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);

                    
					if (this.expectedOutput.length != this.actualOutput.length ||
						this.expectedOutput.length != this.accurracy.length)
						return false;
					
					var i = 0;
					for (i = 0; i < this.expectedOutput.length; i++) {
						if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
							return false;
					}
					
					return true;
				}
			},

		{
            name : "Neptune Data for 2017-08-14",
            input : AAJS.Date.DateToJD (2017, 8, 14, true),
            expectedOutput : 
            [8, // month
            14,  // day. Decrease 1 to adjust from TLR to UTC by subtracting 3 hours
            23 + (0 + 25/60)/60, // RA
            -(7+(22+9/60)/60), // DEC
            2.31 / 3600, // diameter in degrees
			1+30/60, // transit time
			29.0060, // delta
			29.9474, // R
            158* Math.PI/180, // elongation
            1, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 3e-5, 2e-4, 
				4e-8,
				5e-3,
				1e-4,
				2e-4,
				2e-3,
				5e-5,
				],
            test : function () {
                                    var data = NeptuneData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);
                
                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
		{
            name : "Saturn Data for 2017-08-05",
            input : AAJS.Date.DateToJD (2017, 8, 5, true),
            expectedOutput : 
            [8, // month
            5,  // day
            17 + (23 + 24.2/60)/60, // RA
            -(21+(55+31/60)/60), // DEC
            17.61 / 3600, // diameter in degrees
			20+25/60, // transit time
			9.39478, // delta
			10.0605, // R
            128.7* Math.PI/180, // elongation
            0.998, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 3e-5, 7e-5, 
				7e-7,
				3e-4,
				2e-5,
				5e-5,
				4e-4,
				1e-3,
				],
            test : function () {

                                    var data = SaturnData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);

                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
        
 		{
            name : "Venus Data for 2017-08-02",
            input : AAJS.Date.DateToJD (2017, 8, 2, true),
            expectedOutput : 
            [8, // month
            2,  // day
            6 + (6 + 51.7/60)/ 60, // RA
            21+(54+5/60)/60, // DEC
            14.46 / 3600, // diameter in degrees
			9+24/60, // transit time
			1.15387, // delta
			0.72419, // R
            38.3* Math.PI/180, // elongation
            0.75, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 6e-5, 7e-5, 
				2e-6,
				3e-3,
				1e-5,
				1e-5,
				1e-3,
				3e-3,
				],
            test : function () {
 
                                    var data = VenusData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);

                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
        
		{
            name : "Uranus Data for 2017-08-14",
            input : AAJS.Date.DateToJD (2017, 8, 14, true),
            expectedOutput : 
            [8, // month
            14,  // day. Decrease 1 to adjust from TLR to UTC by subtracting 3 hours
            1 + (46 + 41.7/60)/60, // RA
            (10+(22+54/60)/60), // DEC
            3.59 / 3600, // diameter in degrees
			4+16/60, // transit time
			19.5009, // delta
			19.9175, // R
            112.9* Math.PI/180, // elongation
            1, // phase
            ]
            ,
            actualOutput : [],
            accurracy : [0, 0, 3e-6, 2e-4, 
				5e-7,
				8e-3,
				7e-5,
				5e-5,
				1e-3,
				6e-4,
				],
            test : function () {

                                    var data = UranusData.getDataAsObjectForJD (this.input, true);
                
                this.actualOutput.push(data.Month);
                this.actualOutput.push(data.Day);
                this.actualOutput.push(data.RA);
                this.actualOutput.push(data.Dec);
                this.actualOutput.push(data.Diameter);
                this.actualOutput.push(data.MeridianTransit);
                this.actualOutput.push(data.DistanceToEarth);
                this.actualOutput.push(data.DistanceToSun);
                this.actualOutput.push(data.Elongation);
                this.actualOutput.push(data.Phase);

                if (this.expectedOutput.length != this.actualOutput.length ||
                    this.expectedOutput.length != this.accurracy.length)
                    return false;
                
                var i = 0;
                for (i = 0; i < this.expectedOutput.length; i++) {
                    if (!testlib.doubleEq(this.actualOutput[i] , this.expectedOutput[i], this.accurracy[i]))
                        return false;
                }
                
                return true;
            }
        },
        
        
       		{
            name : "Venus rise, transit, set  for 1988-03-20  lat. 42.3333, long. 71.0833, alt. 0",
            input : AAJS.Date.DateToJD (1988, 3, 20, true),
            expectedOutput :  { "Rise" : .51766 * 24, "Transit" : .81980 * 24, "Set" : .12130 * 24 },
            actualOutput : {},
            
            test : function () {
                var yesterdayData = VenusData.getDataAsObjectForJD (this.input - 1);
                var todayData =     VenusData.getDataAsObjectForJD (this.input);
                var tomorrowData =  VenusData.getDataAsObjectForJD (this.input + 1);

                this.actualOutput = AAJS.RiseTransitSet.Calculate (this.input,
                yesterdayData['RA'],
                yesterdayData['Dec'],
                todayData['RA'],
                todayData['Dec'],
                tomorrowData['RA'],
                tomorrowData['Dec'],
                71.0833,
                42.3333,
                -0.5667
                );
                
                for (var key in this.expectedOutput) {
                if (!testlib.doubleEq (this.actualOutput[key], this.expectedOutput[key], 1.1e-4))
                    return false;
                }
                return true;
            }
        }



        
       ];
            
        testlib.runTests (tests);
            
    })();
            
        </script>

